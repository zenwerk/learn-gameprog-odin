package chap03_asteroid

// Chapter 3: アステロイドゲーム
// 
// このゲームは以下の要素を含みます：
// - プレイヤーが操作する宇宙船
// - 多数の小惑星（アステロイド）
// - レーザー発射による小惑星の破壊
// - 円形衝突判定システム
// - コンポーネントベースのアーキテクチャ

// プログラムのエントリーポイント
// ゲームインスタンスを作成し、初期化→ゲームループ→終了処理の流れを実行
main :: proc() {
    // アステロイドゲームのインスタンスを作成
    game: Game
    
    // ゲームシステムを初期化
    // SDL、ウィンドウ、レンダラー、テクスチャローダーなどをセットアップ
    // 成功した場合はゲームループを開始
    success := game_initialize(&game)
    
    if success {
        // メインゲームループを開始
        // この関数はゲームが終了するまでブロックされる
        // 毎フレーム以下の処理を実行：
        // 1. 入力処理 (ProcessInput) - キーボード・マウス入力の処理
        // 2. ゲーム状態更新 (UpdateGame) - アクター・コンポーネントの更新、物理演算、衝突判定
        // 3. 画面描画 (GenerateOutput) - スプライトの描画、画面更新
        game_run_loop(&game)
    }
    
    // ゲーム終了時のクリーンアップ処理
    // メモリ解放、SDL終了、ファイルクローズなどを実行
    game_shutdown(&game)
}